//Deobfuscated with https://github.com/PetoPetko/Minecraft-Deobfuscator3000 using mappings "1.12 stable mappings"!

/*
 * Decompiled with CFR 0.151.
 * 
 * Could not load the following classes:
 *  net.minecraft.block.Block
 *  net.minecraft.init.Blocks
 *  net.minecraft.item.Item
 *  net.minecraft.network.play.client.CPacketCloseWindow
 *  net.minecraft.network.play.client.CPacketPlayerTryUseItemOnBlock
 *  net.minecraft.util.math.BlockPos
 */
package me.zeroeightsix.kami.module.modules.exploits;

import java.util.function.Predicate;
import me.zero.alpine.listener.EventHandler;
import me.zero.alpine.listener.Listener;
import me.zeroeightsix.kami.event.events.PacketEvent;
import me.zeroeightsix.kami.module.Module;
import net.minecraft.block.Block;
import net.minecraft.init.Blocks;
import net.minecraft.item.Item;
import net.minecraft.network.play.client.CPacketCloseWindow;
import net.minecraft.network.play.client.CPacketPlayerTryUseItemOnBlock;
import net.minecraft.util.math.BlockPos;

@Module.Info(name="Secret Close", category=Module.Category.EXPLOITS, description="Illegal Item Bypass")
public class IllegalItemBypass
extends Module {
    private BlockPos ownHopper = null;
    @EventHandler
    public Listener<PacketEvent.Send> listener = new Listener<PacketEvent.Send>(event -> {
        BlockPos clickTarget;
        if (this.isDisabled()) {
            return;
        }
        if (event.getPacket() instanceof CPacketCloseWindow) {
            event.cancel();
        }
        if (event.getPacket() instanceof CPacketPlayerTryUseItemOnBlock && IllegalItemBypass.mc.player.getHeldItemMainhand().getItem() == Item.getItemFromBlock((Block)Blocks.HOPPER) && IllegalItemBypass.mc.world.getBlockState(clickTarget = ((CPacketPlayerTryUseItemOnBlock)event.getPacket()).getPos()).getBlock() != Blocks.HOPPER) {
            this.ownHopper = clickTarget.add(0, 1, 0);
        }
    }, new Predicate[0]);
}

