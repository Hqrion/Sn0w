//Deobfuscated with https://github.com/PetoPetko/Minecraft-Deobfuscator3000 using mappings "1.12 stable mappings"!

/*
 * Decompiled with CFR 0.151.
 * 
 * Could not load the following classes:
 *  net.minecraft.network.Packet
 *  net.minecraft.network.play.client.CPacketPlayerTryUseItemOnBlock
 *  net.minecraft.util.EnumFacing
 */
package me.zeroeightsix.kami.module.modules.exploits;

import java.util.function.Predicate;
import me.zero.alpine.listener.EventHandler;
import me.zero.alpine.listener.Listener;
import me.zeroeightsix.kami.event.events.PacketEvent;
import me.zeroeightsix.kami.module.Module;
import me.zeroeightsix.kami.setting.Setting;
import me.zeroeightsix.kami.setting.Settings;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.CPacketPlayerTryUseItemOnBlock;
import net.minecraft.util.EnumFacing;

@Module.Info(name="BuildHeight", category=Module.Category.EXPLOITS)
public class BuildHeight
extends Module {
    private Setting<Integer> height = this.register(Settings.i("Height", 255));
    @EventHandler
    private Listener<PacketEvent.Send> packetListener = new Listener<PacketEvent.Send>(event -> {
        if (!(event.getPacket() instanceof CPacketPlayerTryUseItemOnBlock)) {
            return;
        }
        CPacketPlayerTryUseItemOnBlock oldPacket = (CPacketPlayerTryUseItemOnBlock)event.getPacket();
        if (oldPacket.getPos().getY() < this.height.getValue()) {
            return;
        }
        if (oldPacket.getDirection() != EnumFacing.UP) {
            return;
        }
        BuildHeight.mc.player.connection.sendPacket((Packet)new CPacketPlayerTryUseItemOnBlock(oldPacket.getPos(), EnumFacing.DOWN, oldPacket.getHand(), oldPacket.getFacingX(), oldPacket.getFacingY(), oldPacket.getFacingZ()));
        event.cancel();
    }, new Predicate[0]);
}

